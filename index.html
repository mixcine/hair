<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamVibe - TMDB Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #0f172a;
            color: #f8fafc;
        }
        .movie-card:hover .overlay {
            opacity: 1;
        }
        .custom-scrollbar::-webkit-scrollbar {
            height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1e293b;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 10px;
        }
        #hero-section {
            transition: background-image 0.8s ease-in-out;
        }
        .skeleton {
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="font-sans antialiased">

    <!-- Navegação Mobile -->
    <nav class="fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-md border-t border-slate-800 flex justify-around p-4 md:hidden">
        <button class="text-blue-500"><i class="fas fa-home text-xl"></i></button>
        <button class="text-slate-400"><i class="fas fa-fire text-xl"></i></button>
        <button class="text-slate-400"><i class="fas fa-plus text-xl"></i></button>
        <button class="text-slate-400"><i class="fas fa-user text-xl"></i></button>
    </nav>

    <!-- Header Desktop -->
    <header class="hidden md:flex fixed top-0 w-full z-50 bg-gradient-to-b from-slate-900 to-transparent p-6 items-center justify-between">
        <div class="flex items-center gap-10">
            <h1 class="text-2xl font-bold text-blue-500 tracking-tighter">STREAMVIBE</h1>
            <nav class="flex gap-6 text-sm font-medium">
                <a href="#" class="text-white hover:text-blue-400 transition">Início</a>
                <a href="#" class="text-slate-400 hover:text-blue-400 transition">Filmes</a>
                <a href="#" class="text-slate-400 hover:text-blue-400 transition">Séries</a>
                <a href="#" class="text-slate-400 hover:text-blue-400 transition">Minha Lista</a>
            </nav>
        </div>
        <div class="flex items-center gap-6">
            <div class="relative group">
                <input type="text" placeholder="Buscar..." class="bg-slate-800/50 border border-slate-700 rounded-full px-4 py-1 text-sm focus:outline-none focus:border-blue-500 w-64">
                <i class="fas fa-search absolute right-3 top-2 text-slate-500"></i>
            </div>
            <button class="text-slate-300 hover:text-white"><i class="fas fa-bell"></i></button>
            <div class="w-8 h-8 rounded bg-blue-600 flex items-center justify-center font-bold text-xs uppercase cursor-pointer">U</div>
        </div>
    </header>

    <main class="pb-24 md:pb-0">
        <!-- Hero Section Dinâmica -->
        <section id="hero-section" class="relative h-[70vh] md:h-[90vh] w-full flex items-end p-6 md:p-16 bg-cover bg-center">
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/40 to-transparent"></div>
            <div class="absolute inset-0 bg-gradient-to-r from-slate-900/80 via-transparent to-transparent"></div>

            <div id="hero-content" class="relative z-10 max-w-3xl opacity-0 transition-opacity duration-1000">
                <span class="bg-blue-600 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-widest mb-4 inline-block">Destaque de Hoje</span>
                <h2 id="hero-title" class="text-4xl md:text-7xl font-black mb-4 leading-tight"></h2>
                <p id="hero-overview" class="text-slate-300 text-sm md:text-lg mb-8 line-clamp-3 md:line-clamp-4 max-w-2xl"></p>
                <div class="flex flex-wrap gap-4">
                    <button class="bg-white text-slate-900 px-8 py-3 rounded-md font-bold flex items-center gap-2 hover:bg-slate-200 transition">
                        <i class="fas fa-play"></i> Assistir Agora
                    </button>
                    <button class="bg-slate-800/80 text-white px-8 py-3 rounded-md font-bold flex items-center gap-2 backdrop-blur hover:bg-slate-700 transition">
                        <i class="fas fa-plus"></i> Minha Lista
                    </button>
                </div>
            </div>
        </section>

        <!-- Listas de Filmes -->
        <div class="space-y-12 mt-[-60px] relative z-20 px-6 md:px-16 pb-12">
            
            <!-- Tendências (Horizontal) -->
            <section>
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold tracking-tight">Tendências da Semana</h3>
                    <div class="flex gap-2">
                        <button class="p-2 bg-slate-800 rounded-full text-xs hover:bg-slate-700"><i class="fas fa-chevron-left"></i></button>
                        <button class="p-2 bg-slate-800 rounded-full text-xs hover:bg-slate-700"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <div id="trending-row" class="flex gap-4 overflow-x-auto pb-4 custom-scrollbar">
                    <!-- Skeletons enquanto carrega -->
                    <div class="flex-none w-48 h-72 skeleton rounded-xl"></div>
                    <div class="flex-none w-48 h-72 skeleton rounded-xl"></div>
                    <div class="flex-none w-48 h-72 skeleton rounded-xl"></div>
                    <div class="flex-none w-48 h-72 skeleton rounded-xl"></div>
                    <div class="flex-none w-48 h-72 skeleton rounded-xl"></div>
                </div>
            </section>

            <!-- Populares (Grid) -->
            <section>
                <h3 class="text-xl font-bold mb-6">Mais Populares</h3>
                <div id="popular-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
                    <!-- Cards de filmes serão injetados aqui -->
                </div>
            </section>

        </div>
    </main>

    <footer class="p-10 text-center border-t border-slate-800 text-slate-500 text-sm">
        <p class="mb-2">Dados fornecidos por <span class="text-blue-500 font-bold">TMDB</span></p>
        <p>&copy; 2024 StreamVibe Entertainment.</p>
    </footer>

    <script>
        const API_KEY = '741fd22ccd6cebe13c498c8efc5c1576';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMG_URL = 'https://image.tmdb.org/t/p/original';
        const POSTER_URL = 'https://image.tmdb.org/t/p/w500';

        async function fetchMovies(endpoint) {
            try {
                const response = await fetch(`${BASE_URL}${endpoint}?api_key=${API_KEY}&language=pt-BR`);
                const data = await response.json();
                return data.results;
            } catch (error) {
                console.error("Erro ao buscar filmes:", error);
                return [];
            }
        }

        function createMovieCard(movie, isHorizontal = false) {
            const containerClass = isHorizontal ? "flex-none w-40 md:w-48 group cursor-pointer" : "group cursor-pointer";
            const imgPath = movie.poster_path ? `${POSTER_URL}${movie.poster_path}` : 'https://via.placeholder.com/500x750?text=No+Image';
            
            return `
                <div class="${containerClass}">
                    <div class="aspect-[2/3] bg-slate-800 rounded-xl overflow-hidden relative movie-card shadow-lg transition-all duration-300 hover:shadow-blue-500/20">
                        <img src="${imgPath}" class="w-full h-full object-cover transition group-hover:scale-110 duration-500" alt="${movie.title}" loading="lazy">
                        <div class="overlay absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/20 to-transparent opacity-0 transition-opacity flex flex-col justify-end p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="bg-yellow-500 text-black text-[10px] font-bold px-1.5 py-0.5 rounded">IMDb ${movie.vote_average.toFixed(1)}</span>
                            </div>
                            <button class="bg-blue-600 text-white w-full py-2 rounded font-bold text-xs hover:bg-blue-500 transition">ASSISTIR</button>
                        </div>
                    </div>
                    <p class="mt-3 text-sm font-semibold truncate group-hover:text-blue-400 transition">${movie.title || movie.name}</p>
                    <p class="text-xs text-slate-500">${(movie.release_date || movie.first_air_date || '').substring(0,4)} • Filme</p>
                </div>
            `;
        }

        async function initApp() {
            // 1. Carregar Hero (pega o primeiro das tendências)
            const trending = await fetchMovies('/trending/all/day');
            if (trending.length > 0) {
                const heroMovie = trending[0];
                const heroSection = document.getElementById('hero-section');
                const heroContent = document.getElementById('hero-content');
                
                heroSection.style.backgroundImage = `url('${IMG_URL}${heroMovie.backdrop_path}')`;
                document.getElementById('hero-title').innerText = heroMovie.title || heroMovie.name;
                document.getElementById('hero-overview').innerText = heroMovie.overview;
                heroContent.classList.remove('opacity-0');
            }

            // 2. Carregar Linha de Tendências
            const trendingRow = document.getElementById('trending-row');
            trendingRow.innerHTML = '';
            trending.slice(1, 12).forEach(movie => {
                trendingRow.innerHTML += createMovieCard(movie, true);
            });

            // 3. Carregar Grid de Populares
            const popular = await fetchMovies('/movie/popular');
            const popularGrid = document.getElementById('popular-grid');
            popularGrid.innerHTML = '';
            popular.forEach(movie => {
                popularGrid.innerHTML += createMovieCard(movie);
            });
        }

        // Iniciar
        window.onload = initApp;
    </script>
</body>
</html>
