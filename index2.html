<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MixCine - Estilo Netflix</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap');
        
        :root {
            --netflix-red: #E50914;
            --netflix-black: #000000;
            --netflix-gray: #121212;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--netflix-black);
            color: white;
            margin: 0;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .netflix-nav {
            background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%);
            transition: background 0.3s ease;
        }

        .netflix-nav.scrolled {
            background: rgba(0,0,0,0.95);
        }

        .bottom-nav {
            background: rgba(18, 18, 18, 0.98);
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* Top 10 Netflix UI */
        .top10-wrapper {
            display: flex;
            align-items: center;
            position: relative;
            padding-left: 20px;
        }

        .top10-rank {
            font-size: 140px;
            font-weight: 900;
            line-height: 1;
            color: var(--netflix-black);
            -webkit-text-stroke: 3px #595959;
            position: absolute;
            left: -10px;
            bottom: -15px;
            z-index: 10;
        }

        .hero-vignette {
            background: linear-gradient(to top, var(--netflix-black) 0%, transparent 50%, rgba(0,0,0,0.4) 100%);
        }

        .movie-card-active:active {
            transform: scale(0.95);
            transition: transform 0.1s;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const API_KEY = '741fd22ccd6cebe13c498c8efc5c1576';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMG_W500 = 'https://image.tmdb.org/t/p/w500';
        const IMG_ORIG = 'https://image.tmdb.org/t/p/original';

        // Icons
        const Icons = {
            Search: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Play: (p) => <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l15 9-15 9V3z"/></svg>,
            Plus: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5"><path d="M12 5v14M5 12h14"/></svg>,
            Info: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>,
            Home: (p) => <svg width="24" height="24" viewBox="0 0 24 24" fill={p.active ? "white" : "none"} stroke="currentColor" strokeWidth="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
            New: (p) => <svg width="24" height="24" viewBox="0 0 24 24" fill={p.active ? "white" : "none"} stroke="currentColor" strokeWidth="2"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M15 3v18M8 3v18M3 10h18M3 17h18"/></svg>,
            Smile: (p) => <svg width="24" height="24" viewBox="0 0 24 24" fill={p.active ? "white" : "none"} stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01"/></svg>,
            Download: (p) => <svg width="24" height="24" viewBox="0 0 24 24" fill={p.active ? "white" : "none"} stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>
        };

        const MovieRow = ({ title, items, onSelect, isTop10 = false }) => {
            if (!items || items.length === 0) return null;
            return (
                <div className="mb-8">
                    <h3 className="text-lg font-bold px-4 mb-2 tracking-tight">{title}</h3>
                    <div className="flex overflow-x-auto gap-2 px-4 no-scrollbar">
                        {items.map((item, index) => (
                            <div 
                                key={item.id} 
                                onClick={() => onSelect(item)}
                                className={`flex-none movie-card-active ${isTop10 ? 'w-40 ml-6 mr-2 relative' : 'w-28'}`}
                            >
                                {isTop10 && <span className="top10-rank tracking-tighter">{index + 1}</span>}
                                <div className={`aspect-[2/3] rounded-md overflow-hidden bg-zinc-900 ${isTop10 ? 'relative z-20' : ''}`}>
                                    <img 
                                        src={`${IMG_W500}${item.poster_path}`} 
                                        className="w-full h-full object-cover" 
                                        loading="lazy" 
                                    />
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        function App() {
            const [data, setData] = useState({ trending: [], top10: [], popular: [], scifi: [] });
            const [selected, setSelected] = useState(null);
            const [scrolled, setScrolled] = useState(false);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const fetchAll = async () => {
                    try {
                        const [res1, res2, res3, res4] = await Promise.all([
                            fetch(`${BASE_URL}/trending/all/week?api_key=${API_KEY}&language=pt-BR`),
                            fetch(`${BASE_URL}/movie/top_rated?api_key=${API_KEY}&language=pt-BR`),
                            fetch(`${BASE_URL}/movie/popular?api_key=${API_KEY}&language=pt-BR`),
                            fetch(`${BASE_URL}/discover/movie?api_key=${API_KEY}&with_genres=878&language=pt-BR`)
                        ]);
                        const [j1, j2, j3, j4] = await Promise.all([res1.json(), res2.json(), res3.json(), res4.json()]);
                        
                        // Criar Top 10 unificado (mesclando os primeiros de trending e top rated)
                        const unifiedTop10 = [...j1.results.slice(0, 5), ...j2.results.slice(0, 5)];

                        setData({
                            trending: j1.results || [],
                            top10: unifiedTop10,
                            popular: j3.results || [],
                            scifi: j4.results || []
                        });
                    } finally { setLoading(false); }
                };
                fetchAll();

                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            if (loading) return (
                <div className="h-screen w-screen flex items-center justify-center bg-black">
                    <div className="text-4xl font-black text-[#E50914] animate-pulse tracking-tighter italic">MIXCINE</div>
                </div>
            );

            const hero = data.trending[0];

            return (
                <div className="bg-black min-h-screen pb-24">
                    {/* Header */}
                    <nav className={`fixed top-0 w-full z-[100] netflix-nav px-4 py-4 flex items-center justify-between transition-all duration-300 ${scrolled ? 'scrolled' : ''}`}>
                        <div className="text-2xl font-black text-[#E50914] tracking-tighter italic">MIXCINE</div>
                        <div className="flex items-center gap-6">
                            <Icons.Search />
                            <div className="w-7 h-7 bg-blue-500 rounded-sm"></div>
                        </div>
                    </nav>

                    {/* Hero Section */}
                    {hero && (
                        <div className="relative h-[80vh] w-full">
                            <img src={`${IMG_ORIG}${hero.poster_path}`} className="w-full h-full object-cover" />
                            <div className="absolute inset-0 hero-vignette" />
                            
                            <div className="absolute bottom-10 w-full flex flex-col items-center">
                                <div className="flex gap-4 text-xs font-bold mb-6 text-zinc-300">
                                    <span>Nostálgico</span>
                                    <span>•</span>
                                    <span>Empolgante</span>
                                    <span>•</span>
                                    <span>Reality TV</span>
                                </div>
                                
                                <div className="flex items-center justify-center gap-10 w-full px-10">
                                    <button className="flex flex-col items-center gap-1">
                                        <Icons.Plus />
                                        <span className="text-[10px] font-medium">Minha lista</span>
                                    </button>
                                    
                                    <button className="bg-white text-black px-6 py-2 rounded-sm flex items-center gap-2 font-bold active:bg-zinc-300">
                                        <Icons.Play />
                                        <span>Assistir</span>
                                    </button>
                                    
                                    <button onClick={() => setSelected(hero)} className="flex flex-col items-center gap-1">
                                        <Icons.Info />
                                        <span className="text-[10px] font-medium">Saiba mais</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Content Rows */}
                    <div className="relative z-20 -mt-10">
                        <MovieRow title="Top 10 em Portugal hoje" items={data.top10} onSelect={setSelected} isTop10={true} />
                        <MovieRow title="Populares na MixCine" items={data.popular} onSelect={setSelected} />
                        <MovieRow title="Tendências agora" items={data.trending} onSelect={setSelected} />
                        <MovieRow title="Ficção Científica" items={data.scifi} onSelect={setSelected} />
                    </div>

                    {/* Bottom Navigation (Netflix Style) */}
                    <div className="fixed bottom-0 w-full h-16 bottom-nav flex items-center justify-around z-[100] px-2 text-zinc-400">
                        <div className="flex flex-col items-center gap-1 text-white">
                            <Icons.Home active={true} />
                            <span className="text-[10px] font-medium">Início</span>
                        </div>
                        <div className="flex flex-col items-center gap-1">
                            <Icons.New />
                            <span className="text-[10px] font-medium">Novidades</span>
                        </div>
                        <div className="flex flex-col items-center gap-1">
                            <Icons.Smile />
                            <span className="text-[10px] font-medium">Risadas</span>
                        </div>
                        <div className="flex flex-col items-center gap-1">
                            <Icons.Download />
                            <span className="text-[10px] font-medium">Downloads</span>
                        </div>
                    </div>

                    {/* Details Modal (Bottom Sheet) */}
                    {selected && (
                        <div className="fixed inset-0 z-[200] flex flex-col justify-end">
                            <div className="absolute inset-0 bg-black/60 backdrop-blur-sm" onClick={() => setSelected(null)} />
                            <div className="relative bg-[#181818] w-full rounded-t-xl animate-in slide-in-from-bottom duration-300 pb-10">
                                <div className="p-4">
                                    <div className="flex gap-4 mb-4">
                                        <div className="w-24 h-36 rounded-md overflow-hidden flex-none">
                                            <img src={`${IMG_W500}${selected.poster_path}`} className="w-full h-full object-cover" />
                                        </div>
                                        <div className="flex-1">
                                            <h2 className="text-xl font-bold mb-1">{selected.title || selected.name}</h2>
                                            <div className="flex items-center gap-2 text-xs text-zinc-400 font-medium">
                                                <span className="text-green-500">98% compatível</span>
                                                <span>{(selected.release_date || selected.first_air_date || '').split('-')[0]}</span>
                                                <span className="bg-zinc-700 px-1 rounded text-[10px] text-white">16+</span>
                                            </div>
                                            <p className="text-xs text-zinc-300 mt-3 line-clamp-3 leading-relaxed">
                                                {selected.overview}
                                            </p>
                                        </div>
                                    </div>
                                    <button className="w-full bg-white text-black py-2.5 rounded-sm font-bold flex items-center justify-center gap-2 mb-3 active:bg-zinc-300">
                                        <Icons.Play />
                                        <span>Assistir</span>
                                    </button>
                                    <button className="w-full bg-zinc-800 text-white py-2.5 rounded-sm font-bold flex items-center justify-center gap-2">
                                        <Icons.Download />
                                        <span>Transferir</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
